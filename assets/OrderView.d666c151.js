import{p as I,s as E,r as S,a as y,o as a,c as f,w as e,Q as U,aY as z,S as A,d as t,e as o,q as c,i as _,t as h,v as r,x as O,m as d,y as l,z as R,f as F,g as M,L as x,M as C,N as L,l as V}from"./index.1dec3fce.js";import{Q as P,a as Y}from"./QBreadcrumbs.4f7aa48a.js";import{Q as v}from"./QTd.2d266956.js";import{Q as N}from"./QCard.9aebe9b7.js";import{Q as G,a as H,b as J}from"./QTable.1d8bce75.js";import{Q as K}from"./QImg.150cb4ad.js";import{Q as W}from"./QResponsive.dd949a32.js";import{u as X}from"./use-quasar.18717ccc.js";const Z={id:"myheader",class:"row justify-end items-center",style:{width:"100%"}},tt=d(" \u6703\u54E1\u8CC7\u6599 "),et=d(" \u9810\u7D04\u67E5\u8A62 "),st=d(" \u8A02\u55AE\u67E5\u8A62 "),ot=d(" \u8CFC\u7269\u8ECA "),at=d(" \u7BA1\u7406\u5F8C\u53F0 "),lt=d(" \u8A3B\u518A "),it=d(" \u767B\u5165 "),nt=d(" \u767B\u51FA "),dt={id:"mycontent",class:"col-12 row content-start"},ct=t("div",{class:"col-12 text-h4 text-xl-h3 text-secondary q-mb-md q-pl-md",style:{width:"100%"}},"\u8A02\u55AE\u67E5\u8A62",-1),rt={class:"col-12 q-mt-md q-pl-lg",style:{width:"100%"}},_t={class:"col-12 q-pa-md",style:{width:"100%"}},ut={class:"row justify-center"},ft=d("\u8A02\u55AE\u8A73\u60C5"),mt={class:"full-width row flex-center text-accent text-h5 q-gutter-sm"},ht={class:"col-12 col-sm-6 col-md-4 col-lg-3 q-pa-sm cursor-pointer"},xt={key:0,class:"text-left q-mx-auto"},gt={class:"row justify-between items-center"},pt={class:"text-accent"},wt={class:"text-secondary text-body2 text-right ellipsis-3-lines"},yt={key:1,class:"text-left q-mx-auto"},vt={class:"row justify-between"},qt={class:"text-accent"},bt={class:"text-secondary text-body2 text-right text-wrap"},kt={key:2,class:"text-left q-mx-auto"},Qt={class:"row justify-between"},St={class:"text-accent"},Ct={class:"text-secondary text-right ellipsis-3-lines"},Lt={key:3,class:"text-left q-mx-auto"},Vt={class:"row justify-between"},Pt={class:"text-accent"},Nt=d("\u8A02\u55AE\u8A73\u60C5"),Tt=t("div",{class:"col-12 text-center text-h3 text-accent q-pb-md"},"\u8A02\u55AE\u8A73\u60C5",-1),$t={class:"row q-pa-md",style:{width:"100%",border:"1px solid #1E1918"}},jt={class:"col-12 row"},Dt=t("div",{class:"col-12 col-sm-auto text-h6 text-accent"},"\u8A02\u55AE\u7DE8\u865F\uFF1A",-1),Bt={class:"col-12 col-sm-auto text-sm-h6 text-dark"},It={class:"col-12 row"},Et=t("div",{class:"col-12 col-sm-auto text-h6 text-accent"},"\u8A02\u55AE\u65E5\u671F\uFF1A",-1),Ut={class:"col-12 col-sm-auto text-sm-h6 text-dark"},zt={class:"row"},At={class:"col-12 col-lg-3"},Ot={class:"col-12 col-lg-9 row q-px-lg-lg"},Rt={class:"col-12 row"},Ft=t("div",{class:"col-12 col-sm-auto text-h6 text-accent"},"\u5546\u54C1\u540D\u7A31\uFF1A\xA0",-1),Mt={class:"col-12 col-sm text-sm-h6 text-dark"},Yt={class:"col-12 row"},Gt=t("div",{class:"col-12 col-sm-auto text-h6 text-accent"},"\u5546\u54C1\u91D1\u984D\uFF1A\xA0 ",-1),Ht={class:"col-12 col-sm text-sm-h6 text-dark"},Jt={class:"col-12 row"},Kt=t("div",{class:"col-12 col-sm-auto text-h6 text-accent"},"\u8A02\u8CFC\u6578\u91CF\uFF1A\xA0",-1),Wt={class:"col-12 col-sm text-sm-h6 text-dark"},Xt={class:"col-12 text-h6 text-accent text-right"},Zt=d("\u5C0F\u8A08\uFF1A\xA0"),te={class:"text-dark"},ee={class:"col-12 row justify-end q-px-lg-lg"},se=t("div",{class:"col-12 col-lg-auto text-h4 text-accent q-my-sm"},"\u8A02\u55AE\u91D1\u984D\uFF1A",-1),oe={class:"col-12 col-lg-auto text-h4 text-warning text-right q-my-sm"},ae={class:"col-12 row justify-around"},xe={__name:"OrderView",setup(le){const q=I(),{logout:T}=q,{isLogin:m,isAdmin:$,cart:b}=E(q),w=S(""),j=X(),D=y({items:[],page:1,rowsPerPage:0}),k=y([]),p=y({dialog:!1}),g=S(""),Q=n=>{g.value=n,p.dialog=!0},B=[{name:"date",label:"\u8A02\u55AE\u65E5\u671F",field:n=>n.date,required:!0,align:"center"},{name:"id",label:"\u8A02\u55AE\u7DE8\u865F",field:n=>n._id,required:!0,align:"center"},{name:"totalPrice",label:"\u8A02\u55AE\u91D1\u984D",field:n=>n.totalPrice,align:"center"},{name:"detail",label:"\u8A02\u55AE\u8A73\u60C5",align:"center"}];return(async()=>{try{const{data:n}=await z.get("/orders");k.push(...n.result.map(u=>(u.totalPrice=u.products.reduce((s,i)=>s+i.price*i.quantity,0),u)))}catch(n){console.log(n),A.fire({icon:"error",title:"\u5931\u6557",text:"\u7121\u6CD5\u53D6\u5F97\u8A02\u55AE"})}})(),(n,u)=>(a(),f(U,{id:"CartView",class:"column"},{default:e(()=>[t("div",Z,[o(R,{class:"text-h5 text-secondary mobile-none"},{default:e(()=>[c(m)?(a(),f(_,{key:0,round:"",dense:"",flat:"",icon:"fa-solid fa-address-card",to:"/member",class:"q-mx-xs"},{default:e(()=>[o(h,{"transition-show":"fade","transition-hide":"fade",offset:[0,0]},{default:e(()=>[tt]),_:1})]),_:1})):r("",!0),c(m)?(a(),f(_,{key:1,round:"",dense:"",flat:"",icon:"fa-regular fa-calendar-days",to:"/booking",class:"q-mx-xs"},{default:e(()=>[o(h,{"transition-show":"fade","transition-hide":"fade",offset:[0,0]},{default:e(()=>[et]),_:1})]),_:1})):r("",!0),c(m)?(a(),f(_,{key:2,round:"",dense:"",flat:"",icon:"fa-solid fa-receipt",to:"/order",class:"q-mx-xs"},{default:e(()=>[o(h,{"transition-show":"fade","transition-hide":"fade",offset:[0,0]},{default:e(()=>[st]),_:1})]),_:1})):r("",!0),c(m)?(a(),f(_,{key:3,round:"",dense:"",flat:"",icon:"fa-solid fa-cart-shopping",to:"/cart",class:"q-mx-xs"},{default:e(()=>[o(h,{"transition-show":"fade","transition-hide":"fade",offset:[0,0]},{default:e(()=>[ot]),_:1}),c(b)>0?(a(),f(O,{key:0,floating:"",color:"red",rounded:""},{default:e(()=>[d(l(c(b)),1)]),_:1})):r("",!0)]),_:1})):r("",!0),c(m)&&c($)?(a(),f(_,{key:4,round:"",dense:"",flat:"",icon:"fa-solid fa-user-gear",to:"/admin",class:"q-mx-xs"},{default:e(()=>[o(h,{"transition-show":"fade","transition-hide":"fade",offset:[0,0]},{default:e(()=>[at]),_:1})]),_:1})):r("",!0),c(m)?r("",!0):(a(),f(_,{key:5,round:"",dense:"",flat:"",icon:"fa-solid fa-user-plus",to:"/register",class:"q-mx-xs"},{default:e(()=>[o(h,{"transition-show":"fade","transition-hide":"fade",offset:[0,0]},{default:e(()=>[lt]),_:1})]),_:1})),c(m)?r("",!0):(a(),f(_,{key:6,round:"",dense:"",flat:"",icon:"fa-solid fa-right-to-bracket",to:"/login",class:"q-ml-xs q-mr-sm"},{default:e(()=>[o(h,{"transition-show":"fade","transition-hide":"fade",offset:[0,0]},{default:e(()=>[it]),_:1})]),_:1})),c(m)?(a(),f(_,{key:7,round:"",dense:"",flat:"",icon:"fa-solid fa-right-from-bracket",onClick:c(T),class:"q-ml-xl q-mr-md"},{default:e(()=>[o(h,{"transition-show":"fade","transition-hide":"fade",offset:[0,0]},{default:e(()=>[nt]),_:1})]),_:1},8,["onClick"])):r("",!0)]),_:1})]),t("div",dt,[ct,t("div",rt,[o(Y,null,{default:e(()=>[o(P,{label:"\u9996\u9801",icon:"fa-solid fa-house",to:"/"}),o(P,{label:"\u8A02\u55AE\u67E5\u8A62",icon:"fa-solid fa-receipt"})]),_:1})]),t("div",_t,[o(H,{grid:c(j).screen.lt.xl,columns:B,rows:k,"row-key":"name",square:"",bordered:"","wrap-cells":"","binary-state-sort":"",dense:"",filter:w.value,loading:n.loading,pagination:D,"no-data-label":"\u76EE\u524D\u6C92\u6709\u4EFB\u4F55\u8A02\u55AE","rows-per-page-label":"\u6BCF\u9801\u986F\u793A\u7B46\u6578","no-results-label":"Oops...\u627E\u4E0D\u5230\u8A72\u7B46\u8A02\u55AE"},{"top-right":e(()=>[o(F,{borderless:"",dense:"",debounce:"300",modelValue:w.value,"onUpdate:modelValue":u[0]||(u[0]=s=>w.value=s),placeholder:"\xA0Search",class:"search"},{append:e(()=>[o(M,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-date":e(s=>[o(v,{img:s,align:"center"},{default:e(()=>[d(l(new Date(s.value).toLocaleString()),1)]),_:2},1032,["img"])]),"body-cell-totalPrice":e(s=>[o(v,{totalPrice:s,align:"center"},{default:e(()=>[d(" NT$ "+l(s.row.totalPrice.toLocaleString()),1)]),_:2},1032,["totalPrice"])]),"body-cell-detail":e(s=>[o(v,{detail:s},{default:e(()=>[t("div",ut,[o(_,{class:"col-auto q-mx-sm",onClick:i=>Q(s),outline:""},{default:e(()=>[ft]),_:2},1032,["onClick"])])]),_:2},1032,["detail"])]),"no-data":e(({message:s})=>[t("div",mt,[t("span",null,l(s),1)])]),item:e(s=>[t("div",ht,[o(N,{onClick:i=>n.openDialog(s.row._id,s.rowIndex),square:"",bordered:"",class:"bg-primary shadow",style:{}},{default:e(()=>[(a(!0),x(L,null,C(s.cols,i=>(a(),x("div",{key:i.name,class:"q-pa-sm"},[i.name==="date"?(a(),x("div",xt,[t("div",gt,[t("span",pt,l(i.label)+"\uFF1A",1),t("span",wt,l(new Date(i.value).toLocaleString()),1)])])):r("",!0),i.name==="id"?(a(),x("div",yt,[t("div",vt,[t("span",qt,l(i.label)+"\uFF1A",1),t("span",bt,l(i.value),1)])])):r("",!0),i.name==="totalPrice"?(a(),x("div",kt,[t("div",Qt,[t("span",St,l(i.label)+"\uFF1A",1),t("span",Ct,"NT$ "+l(i.value.toLocaleString()),1)])])):r("",!0),i.name==="detail"?(a(),x("div",Lt,[t("div",Vt,[t("span",Pt,l(i.label)+"\uFF1A",1),o(_,{class:"col-auto text-secondary",style:{"font-size":"xx-small",padding:"0px 8px"},onClick:ne=>Q(s),outline:""},{default:e(()=>[Nt]),_:2},1032,["onClick"])])])):r("",!0)]))),128))]),_:2},1032,["onClick"])])]),loading:e(()=>[o(G,{showing:"",dark:"","transition-show":"fade",color:"primary"})]),_:1},8,["grid","rows","filter","loading","pagination"])]),o(J,{modelValue:p.dialog,"onUpdate:modelValue":u[2]||(u[2]=s=>p.dialog=s),seamless:"",style:{width:"auto"}},{default:e(()=>[o(N,{square:"",class:"row justify-center bg-info q-pa-lg",style:{width:"100%"}},{default:e(()=>[Tt,t("div",$t,[t("div",jt,[Dt,t("div",Bt,l(g.value.row._id),1)]),t("div",It,[Et,t("div",Ut,l(new Date(g.value.row.date).toLocaleString()),1)]),o(V,{class:"bg-dark text-center q-mx-auto q-my-sm",style:{width:"95%"}}),(a(!0),x(L,null,C(g.value.row.products,s=>(a(),x("div",{key:s._id,class:"col-12 text-accent"},[t("div",zt,[t("div",At,[o(W,{ratio:3/2},{default:e(()=>[o(K,{src:s.product.image[0]},null,8,["src"])]),_:2},1024)]),t("div",Ot,[t("div",Rt,[Ft,t("div",Mt,l(s.product.name),1)]),t("div",Yt,[Gt,t("div",Ht,"NT$ "+l(s.price.toLocaleString()),1)]),t("div",Jt,[Kt,t("div",Wt,l(s.quantity),1)]),t("div",Xt,[Zt,t("span",te,"NT$ "+l((s.price*s.quantity).toLocaleString()),1)])])]),o(V,{class:"bg-dark text-center q-mx-auto q-my-sm",style:{width:"95%"}})]))),128)),t("div",ee,[se,t("div",oe,"NT$ "+l(g.value.row.totalPrice.toLocaleString()),1)])]),t("div",ae,[o(_,{square:"",flat:"",outline:"",class:"col-4 bg-dark text-secondary q-my-sm",label:"\u95DC\u9589",onClick:u[1]||(u[1]=s=>p.dialog=!1)})])]),_:1})]),_:1},8,["modelValue"])])]),_:1}))}};export{xe as default};
